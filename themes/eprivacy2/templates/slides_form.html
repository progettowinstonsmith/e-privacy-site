{% extends "base.html" %}

{% block afterbody %}
<script src="{{ SITEURL }}/theme/js/slides-form.js"></script>
{% endblock %}

{% block title %}
Consegna materiale — {{ SITENAME }}
{% endblock %}

{% block content %}
<article>
  <h2>Consegna materiale per e-privacy</h2>
  <p>Usa questo form per consegnare slide, materiali audio o video destinati all'evento.</p>

  <div class="form_wrapper">
    <form id="slides-form" class="form-innerform" method="post" action="/cgi-bin/submit-slides.py" enctype="multipart/form-data">
      <div id="slides-error" class="form-error" aria-live="polite" style="display:none"></div>

      <div class="form-row form-required">
        <label class="form-label" for="slides_submitter">Relatore</label>
        <span class="form-helpmessage">Seleziona il referente per questa consegna.</span>
        <select id="slides_submitter" name="submitter" class="form-selectbox" required>
          <option value="">Seleziona…</option>
          {% for entry in SLIDES_SUBMITTERS %}
            {% if entry is mapping %}
              {% set value = entry.id or entry.slug or entry.value %}
              {% set label = entry.label or entry.name or entry.title %}
              {% set email = entry.email if entry.email is defined else '' %}
            {% else %}
              {% set value = entry[0] %}
              {% set label = entry[1] %}
              {% set email = entry[2] if entry|count > 2 else '' %}
            {% endif %}
            <option value="{{ value }}"{% if email %} data-email="{{ email }}"{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-row form-required">
        <label class="form-label" for="slides_email">Email del relatore</label>
        <span class="form-helpmessage">Riceverai una copia della conferma su questo indirizzo.</span>
        <input id="slides_email" name="email" type="email" class="form-input" required>
      </div>

      <div class="form-row form-required">
        <label class="form-label" for="slides_password">Password</label>
        <span class="form-helpmessage">Inserisci la password condivisa fornita dalla segreteria.</span>
        <input id="slides_password" name="password" type="password" class="form-input" required autocomplete="off">
      </div>

      <div class="form-row form-required">
        <label class="form-label" for="slides_files">File da consegnare</label>
        <span class="form-helpmessage">Puoi allegare più file contemporaneamente. Formati accettati: PDF, Office/LibreOffice, HTML, testo, audio o video.</span>
        <input id="slides_files" name="files" type="file" class="form-input" multiple required accept=".pdf,.doc,.docx,.odt,.rtf,.txt,.md,.html,.htm,.ppt,.pptx,.odp,.key,.zip,audio/*,video/*">
      </div>

      <div class="form-row">
        <label class="form-label" for="slides_note">Note per la segreteria</label>
        <textarea id="slides_note" name="note" class="form-textarea" rows="4"></textarea>
      </div>

      <div class="form-row form-required">
        <label class="form-label" for="slides_captcha_answer">Verifica</label>
        <span class="form-helpmessage">Per favore risolvi: <span id="slides_captcha_question">0 + 0 = ?</span></span>
        <input id="slides_captcha_answer" name="captcha_answer" type="number" class="form-input" required>
        <input type="hidden" name="captcha_a" id="slides_captcha_a" value="0">
        <input type="hidden" name="captcha_b" id="slides_captcha_b" value="0">
      </div>

      <div class="form-button-wrapper">
        <button type="submit" class="form-button btn-default">Invia materiale</button>
      </div>
    </form>
  </div>

  <p class="form-helpmessage">Il materiale viene salvato in modo sicuro e inoltrato alla segreteria. Gli allegati vengono inviati via mail se il totale è inferiore a circa 1&nbsp;GiB.</p>
</article>
{% endblock %}
