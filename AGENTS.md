# Repository Guidelines

## Project Structure & Module Organization
- **content/** holds markdown articles (per-year folders such as `2025/winter/`) and extra assets (`extra/cgi-bin`, `extra/js`).
- **themes/eprivacy2/** contains the Pelican theme: templates in `templates/` and static assets in `static/`.
- **plugins/** hosts custom Pelican hooks (e.g., submitter config export, map generation).
- **output/** is generated by Pelican; never edit manually.
- Deployment scripts and helpers live at the repo root (`Makefile`, `develop_server.sh`, `fabfile.py`).

## Build, Test, and Development Commands
- `make html`: generate the site into `output/` using `pelicanconf.py`.
- `make devserver`: rebuild on change and serve locally (defaults to port 8000).
- `make publish`: build with `publishconf.py` for production URLs.
- `make upload` / `make rsync_upload`: publish to the remote host via rsync/ssh.

## Coding Style & Naming Conventions
- Templates follow Jinja2 syntax; prefer lowercase-dashed filenames (e.g., `cfp.md`, `consegna-slides.md`).
- Python scripts use 4-space indentation, ASCII-only unless data requires UTF-8; keep logging descriptive.
- JavaScript in `themes/.../static/js` should be strict-mode friendly and avoid global leakage.
- Configuration constants in `pelicanconf.py` are uppercase snake_case.

## Testing Guidelines
- No automated unit test suite; validation relies on `make html` (must complete without errors) and manual browsing of `output/`.
- For CGI updates, run `python3 -m compileall content/extra/cgi-bin/*.py` to catch syntax errors before deployment.
- Before publishing, visit generated forms locally to ensure templates render and JS works as expected.

## Commit & Pull Request Guidelines
- Commit messages follow short imperative summaries (e.g., “Pubblica anche il CGI di consegna slides”).
- Group related changes per commit; keep unrelated edits separate.
- PRs should describe the user-visible impact, link relevant issues, and mention verification steps (`make html`, CGI tests). Screenshots/GIFs help when adjusting templates or styling.

## Deployment Tips
- Ensure `EXTRA_PATH_METADATA` includes every new CGI or asset so Pelican copies it to `output/`.
- After `make upload`, verify CGI endpoints on the server via `curl` or browser to confirm permissions and paths.
- Rotate shared secrets (e.g., slide-upload password) each edition and sync with `pelicanconf.py`.
